# ことイミ日記 (Meaning Diversity Logger)

日常の出来事に対する意味づけを記録し、認知パターンの多様性を探究するためのWebアプリケーション

## 概要

このアプリケーションは、人々が同じ出来事をどのように異なる意味で捉えるかを記録・分析するためのツールです。

## 特徴

- **プライバシー重視**: 研究協力は完全任意、匿名化データのみ収集
- **2つの利用モード**: 
  - **個人モード**: 純粋に個人の記録と内省のため
  - **社会比較モード**: 他者の多様な視点との比較が可能
- **軽量設計**: 外部依存を最小限に抑えた持続可能な実装

## 技術仕様

### フロントエンド
- 純粋な HTML/CSS/JavaScript（外部ライブラリなし）
- SVG/Canvas での自前グラフ描画
- LocalStorage でのオフライン対応

### サーバーサイド  
- Python 標準ライブラリのみ使用
- SQLite データベース
- RESTful API (/submit, /fetch)

## クイックスタート

### 1. サーバー起動

```bash
# デフォルト (localhost:8000)
python server.py

# カスタムポート
python server.py 8080

# 外部アクセス許可
python server.py 8000 0.0.0.0
```

### 2. ブラウザでアクセス

```
http://localhost:8000
```

## データ構造

研究データは以下の要素で構成されます：

### 基本記録項目
- 時刻情報（匿名化）
- 研究協力同意の有無
- 利用モード（個人/社会比較）
- 出来事カテゴリ
- 意味づけ内容
- 反応時間
- データ品質指標

## API仕様

### POST /submit
記録データの送信

```json
{
  "user_id_hash": "user_abc123",
  "timestamp": "2025-09-21T10:30:00Z",
  "consent": true,
  "mode": "social",
  "event_tag": "work",
  "event_text": "プレゼンで失敗した",
  "meaning_text": "次に活かせる良い経験になった",
  "meaning_tag": "learning,growth",
  "rt_ms": 2500
}
```

### GET /fetch?event_tag=work
分布データの取得

```json
{
  "distribution": {
    "learning": 15,
    "negative": 8,
    "growth": 12
  },
  "samples": [
    "失敗から学べることがたくさんあった",
    "次回はもっと準備をしよう",
    "経験値が上がった"
  ],
  "total_count": 35
}
```

## データ品質管理

- **too_short**: 意味づけ文字数 < 10文字
- **spam**: 反応時間 < 500ms
- **duplicate**: 24時間以内の同一内容

## プライバシー・倫理

- 個人情報は一切収集しない
- ユーザーIDは匿名化ハッシュ
- 研究協力は完全に任意
- データ削除請求には対応不可（匿名化のため）

## 研究活用

### 多様性指標
- エントロピー計算
- 意味埋め込み距離分析
- 合意率測定

### モード比較
- Solo vs Social の分布差
- 他者情報提示による影響分析

## トラブルシューティング

### サーバーが起動しない
- ポートが使用中の場合は別のポート番号を指定
- `python --version` で Python 3.6+ を確認

### データベースエラー
- `kotoiminiki.db` ファイルの権限を確認
- SQLite3 がインストールされているか確認

### ブラウザでアクセスできない
- ファイアウォール設定を確認
- `localhost` の代わりに `127.0.0.1` を試す

## ライセンス

研究・教育目的での利用を想定。
商用利用の場合は別途相談。

## 開発者

ことイミ日記プロジェクト  
Meaning Diversity Logger System